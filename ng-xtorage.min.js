!function(t){"use strict";t.module("emd.ng-xtorage",[]).provider("$xtorage",function(){var o=this,n="sessionStorage",e="localStorage",r={storage:n},i={storage:e};o.storage=e,this.$get=["$window",function(n){var e=o.storage,s=function(o,n){var e=null;try{e=t.fromJson(o)}catch(r){e=n?parseInt(o):o}return e},a=function(o){var n=/[0-9]/;if(!t.isString(o)||!o.length)return null;for(var e=0;e<o.length;e++)if(!n.test(o[e]))return!1;return!0},c=function(o){return t.isArray(o)&&o.length},u=function(o){var n=t.isObject(o)?o:{};return n.storage||e},f=function(o,e,r){t.isObject(e)?n[r].setItem(o,t.toJson(e)):n[r].setItem(o,e)},l=function(t,o,n,e){var r=u(n),i=this.get(t,{storage:r})||[];i[e](o),this.save(t,i,{storage:r})},g=function(t,o,n){var e=u(o),r=this.get(t,{storage:e});r[n](),this.save(t,r,{storage:e})},h=function(t,o,n){var e=u(n);if(c(t))for(var r=0;r<t.length;r++)f(t[r],o[r],e);else f(t,o,e)},v=function(t,o,n){l.call(this,t,o,n,"push")},m=function(t,o,n){l.call(this,t,o,n,"unshift")},S=function(t,o){g.call(this,t,o,"pop")},p=function(t,o){g.call(this,t,o,"shift")},I=function(t,o){var e=u(o),r=n[e].getItem(t),i=[];if(c(t)){for(var f=0;f<t.length;f++){var l=n[e].getItem(t[f]);l&&i.push(s(l))}c(i)||(i=null)}else i=s(r,a(r));return i},F=function(t,o){var e=u(o);if(c(t))for(var r=0;r<t.length;r++)n[e].removeItem(t[r]);else n[e].removeItem(t)},L=function(t){var o=u(t);n[o].clear()},d=function(t){return this.get(t,r)},$=function(t){return this.get(t,i)},b=function(t,o){this.save(t,o,r)},j=function(t,o){this.save(t,o,i)},w=function(t,o){v.call(this,t,o,r)},x=function(t,o){v.call(this,t,o,i)},y=function(t,o){m.call(this,t,o,r)},J=function(t,o){m.call(this,t,o,i)},O=function(t){this.remove(t,r)},A=function(t){this.remove(t,i)},k=function(t){this.clear(t,r)},q=function(t){this.clear(t,i)},z=function(t){this.popFrom(t,i)},B=function(t){this.popFrom(t,r)},C=function(t){this.shiftFrom(t,i)},D=function(t){this.shiftFrom(t,r)};return{get:I,save:h,remove:F,clear:L,pushInto:v,unshiftInto:m,popFrom:S,shiftFrom:p,getFromSessionStorage:d,getFromLocalStorage:$,saveInSessionStorage:b,saveInLocalStorage:j,pushIntoSessionStorage:w,pushIntoLocalStorage:x,unshiftIntoSessionStorage:y,unshiftIntoLocalStorage:J,removeFromSessionStorage:O,removeFromLocalStorage:A,popFromSessionStorage:B,popFromLocalStorage:z,shiftFromSessionStorage:D,shiftFromLocalStorage:C,clearSessionStorage:k,clearLocalStorage:q}}]})}(angular);